











<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>
    RSF Wiki: RSVCReplay
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="scripts/mootools.js"></script>
<script type="text/javascript" src="scripts/prettify.js"></script>
<script type="text/javascript" src="scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='view' />
<meta name="wikiBaseUrl" content='http://rsf.fluidproject.org/wiki/' />
<meta name="wikiPageUrl" content='/wiki/Wiki.jsp?page=%23%24%25' />
<meta name="wikiEditUrl" content='/wiki/Edit.jsp?page=RSVCReplay' />
<meta name="wikiJsonUrl" content='/wiki/JSON-RPC' />
<meta name="wikiPageName" content='RSVCReplay' />
<meta name="wikiUserName" content='205.211.169.35' />
<meta name="wikiTemplateUrl" content='/wiki/templates/default/' />
<meta name="wikiApplicationName" content='RSF Wiki' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit":"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next":"Next&raquo;",
"javascript.filter.all":"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info":"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide":"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show":"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="Wiki.jsp%3Fpage=FindPage.html"
    title='Search RSF Wiki' />
<link rel="help"   href="Wiki.jsp%3Fpage=TextFormattingRules.html"
    title="Help" />

 <link rel="start"  href="Wiki.jsp%3Fpage=Main.html"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="images/favicon.ico" />



  









  
  
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="Wiki.jsp%3Fpage=Main.html"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login.jsp%3Fredirect=RSVCReplay.html" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences.jsp%3Fredirect=RSVCReplay.html"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">RSVCReplay</div>

  <div class="searchbox">






<form action="http://xen0.idrc.ocadu.ca/wiki/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="Wiki.jsp%3Fpage=RSVCReplay.html#" id='quickView' class='action'
      onclick="SearchBox.navigate( '/wiki/Wiki.jsp?page=__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="Wiki.jsp%3Fpage=RSVCReplay.html#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( '/wiki/Edit.jsp?page=__PAGEHERE__','Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="Wiki.jsp%3Fpage=RSVCReplay.html#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( '/wiki/Edit.jsp?page=__PAGEHERE__', 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="Wiki.jsp%3Fpage=RSVCReplay.html#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( 'http://rsf.fluidproject.org/wiki/Search.jsp?query=__PAGEHERE__','RSVCReplay' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="Wiki.jsp%3Fpage=RSVCReplay.html#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="Wiki.jsp%3Fpage=RIFEContinuations.html">RIFEContinuations</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=Qwicap.html">Qwicap</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=LogonTest_1.html">LogonTest_1</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=BeanExploder.html">BeanExploder</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=BeanLocator.html">BeanLocator</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=BeanReasonableness.html">BeanReasonableness</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=Levelization.html">Levelization</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=ObstinateMap.html">ObstinateMap</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=ParachuteRendering.html">ParachuteRendering</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=Peas.html">Peas</a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="Wiki.jsp%3Fpage=MoreMenu.html" class="action more">More...</a>
    </li>

  </ul>
</div>

      








<div class="tabmenu">

  

  

  
  
  
    
  
    
  



  <a class="activetab" id="menu-pagecontent" accesskey="v" ><span class='accesskey'>V</span>iew</a>

  

  
  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>
  
    
  <a id="menu-info" href='PageInfo.jsp%3Fpage=RSVCReplay.html' accesskey="i" ><span class='accesskey'>I</span>nfo</a>
    
  

</div>
<div class="tabs">

  <div id="pagecontent" >

    











<div style=" background-color: #c0c0c0; border: 1px dotted black; padding: 0.2em; font-size: 200%; text-align: center">
--= OLD=--
</div>
<div style=" background-color: #c0c0c0; text-align: center">
This page predates the release of RSF 0.6 - Note that while the RSVC Preservation Strategy approach has been &quot;implemented&quot;, it was never brought to being fully functional since it became apparent that there were quite a number of features more vital to users. If there is any user demand for it, this might be finished after the 1.0 release.
</div>
<p>The &quot;RSF Replay&quot; phase of RSF <a class="wikipage" href="Wiki.jsp%3Fpage=HandlerSequence.html">request handling</a> occurs before the evaluation of any <a class="wikipage" href="Wiki.jsp%3Fpage=EL.html">EL</a> expressions which might query the application's data model. It is a lightweight and fairly foolproof replacement for functionality that might otherwise be provided by the application's underlying ORM solution's <a class="wikipage" href="Wiki.jsp%3Fpage=LongTransaction.html">long transaction</a> support.
</p>
<p>This phase is discussed from other points of view in other pages, mainly those above, but in essence, 
</p>
<ol><li>If the <a class="wikipage" href="Wiki.jsp%3Fpage=ViewParameters.html">view parameters</a> for this request contains a <a class="wikipage" href="Wiki.jsp%3Fpage=ViewToken.html">view token</a>, this is used as a key into the <a class="wikipage" href="Wiki.jsp%3Fpage=TokenStateHolder.html">TokenStateHolder</a> to discover any <a class="createpage" href="Edit.jsp%3Fpage=TokenRequestState.html" title="Create &quot;TokenRequestState&quot;">TokenRequestState</a>(TRS). There will be storage here if this request is either i) part of a <a class="wikipage" href="Wiki.jsp%3Fpage=MultiRequest.html">multi-request cycle</a> or ii) an error return from a user submission.
</li><li>If the TRS contains a <a class="wikipage" href="Wiki.jsp%3Fpage=RequestSubmittedValueCache.html">RequestSubmittedValueCache</a> (RSVC), each entry there is evaluated as EL (causing loading of any request beans) and the user submitted values (among other entries) are <i>re-applied</i> to the data model, re-creating the bean state that was present at the end of the previous request in the cycle.
</li></ol><p>This solution involves various tradeoffs from a <a class="wikipage" href="Wiki.jsp%3Fpage=LongTransaction.html">long transaction</a> strategy, which must be considered very carefully:
</p>
<ul><li>RSVC may well be <i>slower</i> than LTs, especially for wizards with very many stages (although note this is probably offset by possible reductions in memory requirements in high-load environments):
<ul><li>It is an important consideration of RSF that its <a class="wikipage" href="Wiki.jsp%3Fpage=EL.html">EL</a> evaluate as quickly as reasonably possible, shortly aided by <a class="wikipage" href="Wiki.jsp%3Fpage=FastClass.html">FastClass</a>.
</li><li>The RSVC replay will probably <i>not</i> cause more database transactions than the equivalent LT approach, since most of the same entities will need to be queried during the &quot;re-attachment&quot; process as will be queried by the batched EL operations - and this querying is always envisaged to be the slowest part of an RSF app.
</li><li>However, application designers should be aware that the request binding part of their code may be invoked repeatedly, and should take care that any expensive processing is deferred to the <a class="wikipage" href="Wiki.jsp%3Fpage=Action.html">invoke application</a> phase. Ideally, request binding will perform simple type conversions and setting properties.
</li></ul></li><li>RSVC may be slightly less <i>robust</i> than LTs in terms of reliably recreating the identical bean state at previous request end, at least until the RSVC log is extended to cache not only value bindings for <a class="createpage" href="Edit.jsp%3Fpage=UIInput.html" title="Create &quot;UIInput&quot;">input</a> components but also for output components. It is important for application coherency that the &quot;state&quot; of a request not only includes data model values <i>received from</i> a user, but also those sent to him. This footnote<a class="footnoteref" href="Wiki.jsp%3Fpage=RSVCReplay.html#ref-RSVCReplay-1">[1]</a> on the &quot;auction&quot; example (taken from the book, &quot;Hibernate in Action&quot; provides a compelling scenario for this problem.
</li><li>However, RSVC allows much <i>earlier detection</i> of conflicts than is possible with LTs - the LT, being completely isolated from the database environment, <i>must</i> wait until the final stage of a multi-stage wizard before reporting a version exception. The RSVC (especially if it is augmented to map version fields from the entity model into hidden fields in the form) can signal a conflict at the first request after it occurs, possibly preventing the submission of a lot of data that might be invalid.
</li><li>RSVC also is much more economical on server resources. Since the RSVC is purely <i>dead data</i> (it is a flat list of structures with String fields), it is easily serializable, which has two important benefits:
<ul><li>Firstly, on low server memory, the RSVC log (especially for older data) can be stored on disk with the minimum overhead of data conversion code. This is in contrast to LT state which MUST remain in memory and is not in any way serialisable (at least with current ORM solutions).
</li><li>Secondly - an important robustness consideration. Many modern webapp containers (such as Tomcat) provide a &quot;safety net&quot; whereby if the server is shut down gracefully, any data stored in Session containers that is Serializable is written to disk, to be used to reconstruct the session state on startup. This state must be lost while using an LT solution, but may be preserved with RSF.
</li></ul></li><li>RSVC is also pretty <i>straightforward</i>. Long transactions while attractive on paper, seem to involve really quite tricky grubbing around during the reattachment phase, which can fail in really quite obscure ways (in our local experience).
</li></ul><p>However, all this said, RSF does not <i>prevent</i> the use of ORM-layer long transactions - the architecture is sufficiently modular that ComponentProducers, AlterationWrappers &amp;c may conspire to present the <i>same</i> component tree at subsequent requests, and the RSVC <a class="wikipage" href="Wiki.jsp%3Fpage=Fixup.html">fixup</a> stage skipped. The purpose of RSF is to provide some <i>reasonable</i> default behaviour that should cover most user requirements, and work correctly irrespective of the ORM or other technology backing their data model. 
</p>
<p>An expanded version of this discussion appears on the <a class="wikipage" href="Wiki.jsp%3Fpage=RSVCVersusDeadBeansMRSA.html">RSVCVersusDeadBeansMRSA</a> page.
</p>






        
  </div>


  

  
  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>

  
    
  <div id="info" class="hidetab" >

  </div>

    
  

<div style="clear:both;" ></div>
</div>

      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="Wiki.jsp%3Fpage=RSVCReplay.html#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-) was last changed on <a href="Diff.jsp%3Fpage=RSVCReplay&amp;r1=-1&amp;r2=1.html">30-Jul-2006 19:33</a> by UnknownAuthor
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login.jsp%3Fredirect=RSVCReplay.html" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences.jsp%3Fredirect=RSVCReplay.html"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="Wiki.jsp%3Fpage=RSVCReplay&amp;skin=raw.html"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <p><a class="wikipage" href="Wiki.jsp%3Fpage=Main.html">Main page</a><br />
<tt> </tt><i><a class="wikipage" href="Wiki.jsp%3Fpage=ThisWiki.html">About</a></i><br />
</p><p><a class="wikipage" href="Wiki.jsp%3Fpage=GettingStarted.html">Getting Started</a><br />
</p>
<p><b>Documentation</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Developers.html">Developers</a><br />
<tt>  </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Javadocs.html">Javadocs</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Designers.html">Designers</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=SampleRSFApps.html">Sample RSF Apps</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Presentations.html">Presentations</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Acronyms.html">Acronyms</a><br />
</p>
<p><b>Downloads</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Downloads.html">Current Release</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=TrunkCode.html">Trunk</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=CodeDistributions.html">Distributions</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=OldCode.html">Old Versions</a><br />
</p>
<p><b>Community</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=QampA.html">Q&amp;A</a><br />
<tt> </tt><a class="external" href="http://ponder.org.uk/rsf/">Forums</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=EmailLists.html">Mailing Lists</a><br />
<tt> </tt><a class="external" href="http://www.caret.cam.ac.uk/jira/browse/RSF">Issue Tracker</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=azeckoski.html">People</a><br />
</p>
<p><b>Design</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Roadmap.html">Roadmap</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Integrations.html">Integrations</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Concepts.html">Concepts</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Philosophy.html">Philosophy</a><br />
</p>
<div style="font-style:italic;font-size:0.8em;">
<b>Pages</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=FindPage.html">Find</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=RecentChanges.html">Recent Changes</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=UnusedPages.html">Unused</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=UndefinedPages.html">Undefined</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=PageIndex.html">Index</a>
</div>
<p />
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Referenced by</b><br />
<a class="wikipage" href="Wiki.jsp%3Fpage=Concepts.html">Concepts</a><br /><a class="wikipage" href="Wiki.jsp%3Fpage=Fixup.html">Fixup</a><br /><a class="wikipage" href="Wiki.jsp%3Fpage=LongTransaction.html">LongTransaction</a><br /><a class="wikipage" href="Wiki.jsp%3Fpage=RSVCVersusDeadBeansMRSA.html">RSVCVersusDeadBeansM...</a><br /><a class="wikipage" href="Wiki.jsp%3Fpage=RequestSubmittedValueCache.html">RequestSubmittedValu...</a><br />
</p>
    
  </div>

  

  
  
  <div class="wikiversion">JSPWiki v2.8.2
  <span class="rssfeed">
    
  </span>
  </div>  
  
</div>

	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="Wiki.jsp%3Fpage=Main.html"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.2
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>
</html>

