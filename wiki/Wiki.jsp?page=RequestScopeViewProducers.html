











<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>
    RSF Wiki: RequestScopeViewProducers
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="scripts/mootools.js"></script>
<script type="text/javascript" src="scripts/prettify.js"></script>
<script type="text/javascript" src="scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='view' />
<meta name="wikiBaseUrl" content='http://rsf.fluidproject.org/wiki/' />
<meta name="wikiPageUrl" content='/wiki/Wiki.jsp?page=%23%24%25' />
<meta name="wikiEditUrl" content='/wiki/Edit.jsp?page=RequestScopeViewProducers' />
<meta name="wikiJsonUrl" content='/wiki/JSON-RPC' />
<meta name="wikiPageName" content='RequestScopeViewProducers' />
<meta name="wikiUserName" content='205.211.169.35' />
<meta name="wikiTemplateUrl" content='/wiki/templates/default/' />
<meta name="wikiApplicationName" content='RSF Wiki' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit":"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next":"Next&raquo;",
"javascript.filter.all":"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info":"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide":"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show":"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="Wiki.jsp%3Fpage=FindPage.html"
    title='Search RSF Wiki' />
<link rel="help"   href="Wiki.jsp%3Fpage=TextFormattingRules.html"
    title="Help" />

 <link rel="start"  href="Wiki.jsp%3Fpage=Main.html"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="images/favicon.ico" />



  









  
  
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="Wiki.jsp%3Fpage=Main.html"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login.jsp%3Fredirect=RequestScopeViewProducers.html" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences.jsp%3Fredirect=RequestScopeViewProducers.html"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">RequestScopeViewProducers</div>

  <div class="searchbox">






<form action="http://xen0.idrc.ocadu.ca/wiki/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="Wiki.jsp%3Fpage=RequestScopeViewProducers.html#" id='quickView' class='action'
      onclick="SearchBox.navigate( '/wiki/Wiki.jsp?page=__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="Wiki.jsp%3Fpage=RequestScopeViewProducers.html#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( '/wiki/Edit.jsp?page=__PAGEHERE__','Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="Wiki.jsp%3Fpage=RequestScopeViewProducers.html#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( '/wiki/Edit.jsp?page=__PAGEHERE__', 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="Wiki.jsp%3Fpage=RequestScopeViewProducers.html#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( 'http://rsf.fluidproject.org/wiki/Search.jsp?query=__PAGEHERE__','RequestScopeViewProducers' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="Wiki.jsp%3Fpage=RequestScopeViewProducers.html#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="Wiki.jsp%3Fpage=UIComponent.html">UIComponent</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=WhyRSF.html">WhyRSF</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=azeckoski.html">People</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=DataAlterationRequest.html">DataAlterationRequest</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=RSJCIS.html">RSJCIS</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=RequestSubmittedValueCache.html">RequestSubmittedValueCache</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=ViewExceptionStrategy.html">ViewExceptionStrategy</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=HibernateCookBook_4.html">HibernateCookBook_4</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=Downloads.html">CurrentCode</a>, <a class="wikipage" href="Wiki.jsp%3Fpage=RenderSystem.html">RenderSystem</a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="Wiki.jsp%3Fpage=MoreMenu.html" class="action more">More...</a>
    </li>

  </ul>
</div>

      








<div class="tabmenu">

  

  

  
  
  
    
  
    
  



  <a class="activetab" id="menu-pagecontent" accesskey="v" ><span class='accesskey'>V</span>iew</a>

  

  
  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>
  
    
  <a id="menu-info" href='PageInfo.jsp%3Fpage=RequestScopeViewProducers.html' accesskey="i" ><span class='accesskey'>I</span>nfo</a>
    
  

</div>
<div class="tabs">

  <div id="pagecontent" >

    











<p>Since version 0.6, RSF has allowed <a class="wikipage" href="Wiki.jsp%3Fpage=ComponentProducer.html">ViewProducers</a> to be declared either at application scope, or at request scope. Since RSF is based on Spring/<a class="wikipage" href="Wiki.jsp%3Fpage=RSAC.html">RSAC</a>, the form of these declarations is exactly the same in each case, and &quot;moving&quot; a producer simply involves pasting a definition from one Spring-formatted XML file into another (typically <tt>applicationContext.xml</tt> and <tt>requestContext.xml</tt>).
</p><p>The question is, when should you declare producers at one scope rather than another? The simple answer, for those who don't want to think about the issues, is to always declare producers at request scope. The fuller answer is, to declare producers at application scope whenever you <i>can</i> - and you can do this, wherever your producer has no request-scope dependencies. This follows from the point that you can't declare a bean which depends on another bean which is at a shorter scope. There is a graphical illustration of the different RSF bean scopes on the Sakai <a class="external" href="http://issues.sakaiproject.org/confluence/display/BOOT/RSF+and+Spring+Contexts">training site</a><img class="outlink" src="images/out.png" alt="" />.
</p>
<h3 id="section-RequestScopeViewProducers-RequestScopeOrApplicationScopeProducers">Request-scope or application-scope producers?<a class="hashlink" href="Wiki.jsp%3Fpage=RequestScopeViewProducers.html#section-RequestScopeViewProducers-RequestScopeOrApplicationScopeProducers">#</a></h3>
Whether you use application-scope ViewProducers or not is firstly a matter of efficiency, and secondly one of documentation. Firstly, whilst <a class="wikipage" href="Wiki.jsp%3Fpage=RSAC.html">RSAC</a> beans are very fast to create (on the order of microseconds), they are not completely free - therefore it is better to economise on unnecessary request-scope beans. RSF itself has been gradually returning as many of its own core beans into application scope as possible, especially since the introduction of <a class="wikipage" href="Wiki.jsp%3Fpage=RSACBridgeProxy.html">RSACBridgeProxy</a>. Secondly, if bean really has no request-scope dependencies, it is valuable to document this practically, by writing it at application-scope - this emphasises that its function really is that of a &quot;service&quot; in the original Spring style.
<h3 id="section-RequestScopeViewProducers-RSFProgrammingStylesStatelessnessAndEL">RSF programming styles - statelessness and EL<a class="hashlink" href="Wiki.jsp%3Fpage=RequestScopeViewProducers.html#section-RequestScopeViewProducers-RSFProgrammingStylesStatelessnessAndEL">#</a></h3>
Initially RSF producers were only intended to be declared at application scope - this certainly enforces a &quot;cleanly&quot; and stateless design, although even at request scope the producers would still be sufficiently stateless so long as they made no use of session or flow scope beans.
<p>The question is, what are the implications of a design where the thing has been done which moves a producer into request-scope, that is, giving it some request-scope dependencies? Typically these dependencies will be beans from the application's own <i>request model</i><a class="footnote" name="ref-RequestScopeViewProducers-1">[#1]</a>, and the reason they will be injected is that the view logic in the producer has some need of them.
</p>
<p>However, the RSF EL system was set up so that the typical uses of the values in the request model (which is for data backing controls) would not actually require the values to be explicitly fetched in the view logic. This is what enables RSF views to have a more declarative structure, and in more extreme designs, to even be specified in XML. For example, the following control:
</p>
<pre>
      UIInput.make(form, &quot;login-user&quot;, &quot;#{logon.name}&quot;);
</pre>
refers to the request model via EL, and therefore wouldn't required the bean named <tt>logon</tt> to be loaded in as a dependency of this producer. This is the &quot;natural&quot; pattern of using RSF, and it is designed to maximise the symmetry and transparency of your application logic. 
<p>However, there are some cases where the view logic is sufficiently complex that it would be awkward to impossible to work only with &quot;deferred values&quot; - for example where the structure of the view changes significantly depending on contextual values. In these cases, it may still be possible to salvage an application-scope producer, by simply injecting the application-scope precursor of the state (for example, a DAO or other business logic API implementation) and performing a manual fetch of the state. However, there are some cases where simply injecting parts of the request model directly is the clearest and most direct approach, and RSF is set up, with the possibility for request-scope view producers, to make this as natural and idiomatic as possible.
</p>
<p>This is the approach used in many of the RSF sample applications, for example the <a class="wikipage" href="Wiki.jsp%3Fpage=LogonTest.html">LogonTest</a> application has definitions like this in its LogonProducer:
</p>
<pre>
  public void setLogonBean(LogonBean logonbean) {
    this.logonbean = logonbean;
  }
...
  public void fillComponents(UIContainer tofill, ViewParameters viewparamso,
      ComponentChecker arg2) {
    if (logonbean.name == null) {
      UIBranchContainer.make(tofill, &quot;content-not-logged-in-pane:&quot;);
...
      }
    else {
      UIBranchContainer pane = UIBranchContainer.make(tofill,
          &quot;content-logged-in-pane:&quot;);
      }

</pre>
<p>The requirement of showing different view contents to the user depending on whether they were logged on or not could be met in a number of different ways with an application-scope producer, but in this case it was simplest to directly inject the LogonBean itself, and test its state in the view logic. 
</p>
<p>Of course, while it is quite reasonable to inject parts of the request model into a producer, it is <i>definitely impermissible</i> to attempt to modify parts of it, and especially not in a non-idempotent way! To guard against this possibility, RSF by default forbids any parts of the request model which are participating in a longer scope (flow or session) to be preserved at the end of a render request, which at least prevents any errors of this kind from corrupting future views. However, the surest way to avoid these errors is not to inject the request model at all!
</p>
<hr />
<a class="footnoteref" href="Wiki.jsp%3Fpage=RequestScopeViewProducers.html#ref-RequestScopeViewProducers-1">[1]</a> Although they may also be some environmental dependencies as well, such as the Locale for the current request. However, RSF has by 0.7 provided standard proxies for the standard environmental dependencies, for example <tt>requestLocaleProxy</tt> for the request-bean <tt>requestLocale</tt>, so the requirement for request-scope environmental dependencies should no longer be the thing which triggers a producer move to request scope. 
<p />






        
  </div>


  

  
  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>

  
    
  <div id="info" class="hidetab" >

  </div>

    
  

<div style="clear:both;" ></div>
</div>

      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="Wiki.jsp%3Fpage=RequestScopeViewProducers.html#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-) was last changed on <a href="Diff.jsp%3Fpage=RequestScopeViewProducers&amp;r1=-1&amp;r2=1.html">18-Jan-2007 14:05</a> by UnknownAuthor
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="Login.jsp%3Fredirect=RequestScopeViewProducers.html" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="UserPreferences.jsp%3Fredirect=RequestScopeViewProducers.html"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="Wiki.jsp%3Fpage=RequestScopeViewProducers&amp;skin=raw.html"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <p><a class="wikipage" href="Wiki.jsp%3Fpage=Main.html">Main page</a><br />
<tt> </tt><i><a class="wikipage" href="Wiki.jsp%3Fpage=ThisWiki.html">About</a></i><br />
</p><p><a class="wikipage" href="Wiki.jsp%3Fpage=GettingStarted.html">Getting Started</a><br />
</p>
<p><b>Documentation</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Developers.html">Developers</a><br />
<tt>  </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Javadocs.html">Javadocs</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Designers.html">Designers</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=SampleRSFApps.html">Sample RSF Apps</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Presentations.html">Presentations</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Acronyms.html">Acronyms</a><br />
</p>
<p><b>Downloads</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Downloads.html">Current Release</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=TrunkCode.html">Trunk</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=CodeDistributions.html">Distributions</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=OldCode.html">Old Versions</a><br />
</p>
<p><b>Community</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=QampA.html">Q&amp;A</a><br />
<tt> </tt><a class="external" href="http://ponder.org.uk/rsf/">Forums</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=EmailLists.html">Mailing Lists</a><br />
<tt> </tt><a class="external" href="http://www.caret.cam.ac.uk/jira/browse/RSF">Issue Tracker</a><img class="outlink" src="images/out.png" alt="" /><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=azeckoski.html">People</a><br />
</p>
<p><b>Design</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Roadmap.html">Roadmap</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Integrations.html">Integrations</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Concepts.html">Concepts</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=Philosophy.html">Philosophy</a><br />
</p>
<div style="font-style:italic;font-size:0.8em;">
<b>Pages</b><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=FindPage.html">Find</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=RecentChanges.html">Recent Changes</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=UnusedPages.html">Unused</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=UndefinedPages.html">Undefined</a><br />
<tt> </tt><a class="wikipage" href="Wiki.jsp%3Fpage=PageIndex.html">Index</a>
</div>
<p />
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Referenced by</b><br />
<a class="wikipage" href="Wiki.jsp%3Fpage=HibernateCookBook_4.html">HibernateCookBook_4</a><br /><a class="wikipage" href="Wiki.jsp%3Fpage=QampA.html">QampA</a><br />
</p>
    
  </div>

  

  
  
  <div class="wikiversion">JSPWiki v2.8.2
  <span class="rssfeed">
    
  </span>
  </div>  
  
</div>

	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="Wiki.jsp%3Fpage=Main.html"
       title="Go to home page Main ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.2
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>
</html>

